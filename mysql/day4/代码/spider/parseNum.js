let fs = require("fs");
var opentype = require('opentype.js');
var similar = require('./similar1')
let svgPaths = {
    "0":`<path d="M3.02 76.45L3.02 77.29Q3.02 67.09 4.85 60.70L4.85 60.70Q5.63 56.13 10.41 53.10L10.41 53.10Q13.43 49.45 19.83 50.08L19.83 50.08Q27.98 50.08 32.27 56.05L32.27 56.05Q34.24 59.85 35.40 64.21Q36.56 68.57 36.56 76.45L36.56
    76.45Q36.56 80.95 36.91 84.60L36.91 84.60Q35.72 88.33 34.73 92.13L34.73 92.13Q32.77 96.77 29.11 99.72L29.11 99.72Q25.73 102.74 20.46 102.74L20.46 102.74Q12.38 102.74 8.09 97.40L8.09 97.40Q3.02 91.07 3.02 76.45L3.02 76.45ZM10.27 76.45L8.72 76.45Q10.20 89.17 12.45 93.32L12.45 93.32Q15.33 97.54 19.72 97.54Q24.12 97.54 27.07 93.25L27.07 93.25Q30.09 90.02 30.09 76.45L30.09 76.45Q30.09 63.79 27.07 59.29L27.07 59.29Q23.77 55.35 19.76 55.35L19.76 55.35Q15.33 55.35 12.73 58.94L12.73 58.94Q9.49 63.79 10.27 76.45L10.27 76.45Z"/>`,
    "1":`<path d="M27 101.83L26.86 101.83L20.81 102.81L19.69 62.38Q17.37 63.72 13.92 65.13L13.92 65.13Q11.60 68.01 7.88 69.13L7.88 69.13L7.59 63.02Q13.08 60.55 17.72 56.97L17.72 56.97Q18 55.21 21.02 53.45L21.02 53.45L22.64 49.80L27.28
    49.45L27 101.83Z"/>`,
    "2":`<path d="M10.97 95.78L36.21 95.78L36.21 101.83L2.18 101.05Q2.18 99.58 2.92 97.19Q3.66 94.80 4.64 93.95L4.64 93.95Q5.63 92.27 7.03 90.58L7.03 90.58Q8.16 88.89 10.55 86.99L10.55 86.99Q12.59 85.09 15.33 81.79L15.33 81.79Q19.55 79.33 22.36 77.43L22.36 77.43Q25.17 73.98 26.72 71.88L26.72 71.88Q29.67 67.87 29.67 64.21Q29.67 60.55 28.05 57.95L28.05 57.95Q24.26 55.35 19.97 54.86L19.97 54.86Q15.40 55.35 12.66 57.46L12.66 57.46Q9.91 60.55 9.84 65.69L9.84 65.69L3.38 64.98Q4.01 57.60 8.37 53.80L8.37 53.80Q13.71 50.08 20.11 50.08L20.11 50.08Q26.58 50.64 31.85 54.16L31.85
    54.16Q36.14 58.30 36.77 64.42L36.77 64.42Q36.14 67.66 35.51 70.47L35.51 70.47Q33.75 73.21 30.16 76.80L30.16 76.80Q29.25 78.41 26.79 81.30L26.79 81.30Q24.40 82.98 20.95 85.87L20.95 85.87Q18.07 88.26 16.28 89.88Q14.48 91.49 13.64 92.34L13.64 92.34Q12.30 93.18 12.16 94.02L12.16 94.02Q11.53 94.16 10.97 95.78L10.97 95.78Z"/>`,
    "3":`<path d="M3.02 88.75L9.35 87.34Q10.41 92.76 12.97 95.15Q15.54 97.54 19.41 97.54L19.41 97.54Q23.91 97.96 27 94.45L27 94.45Q30.02 91.35 30.02 86.89Q30.02 82.42 27.21 79.61L27.21 79.61Q24.68 76.73 19.97 76.73L19.97 76.73Q18.07 76.73 15.89 77.43L15.89 77.43L16.17 71.88Q16.59 71.88 16.80 71.95L16.80 71.95L17.23 71.95Q21.30 71.95 24.50 69.84Q27.70 67.73 27.70 64.21L27.70 64.21Q28.13 59.85 24.54 57.53L24.54 57.53Q23.20 56.20 19.27 55.35L19.27 55.35Q15.61
    55.35 13.18 57.57Q10.76 59.78 10.97 64.56L10.97 64.56L3.66 63.44Q4.85 56.97 8.93 53.59L8.93 53.59Q13.08 50.08 19.13 50.08L19.13 50.08Q23.34 50.08 26.93 51.98L26.93 51.98Q30.45 53.66 32.34 57.53L32.34 57.53Q34.24 59.99 35.02 63.93L35.02 63.93Q34.03 66.95 32.48 69.63L32.48 69.63Q30.66 72.30 27.28 73.91L27.28 73.91Q32.48 76.02 34.24 79.40L34.24 79.40Q36.77 81.58 36.77 87.13L36.77 87.13Q37.55 93.32 31.85 97.19L31.85 97.19Q26.93 102.81 19.41 102.81L19.41 102.81Q12.59 102.81 8.12 98.77Q3.66 94.73 3.02 88.75L3.02 88.75Z"/>`,
    "4":`<path d="M23.27 101.83L23.98 101.83L23.27 89.52L0.91 89.73L0.35 83.69L24.68 50.01L30.66 49.94L28.69 83.69L37.41 84.74L36.56 89.10L28.97 89.66L29.60 102.18L23.27 101.83ZM22.78 84.39L23.27 84.18L22.15 61.05L8.09 83.69L22.78 84.39Z"/>`,
    "5":`<path d="M3.02 88.33L9.63 87.84Q10.34 92.76 13.71 95.15L13.71 95.15Q15.61 97.54 19.51 97.54Q23.41 97.54 26.44 94.09L26.44 94.09Q30.45 90.44 30.16 84.95L30.16 84.95Q30.45 79.47 27.35 76.38L27.35 76.38Q24.26 74.13 19.41 73.28L19.41 73.28Q16.31 73.98 13.85 74.83L13.85 74.83Q10.83 76.02 10.69 78.20L10.69 78.20L4.08 77.50L9.07 50.99L33.89 50.99L34.73 56.55L14.20 57.04L11.39 70.89Q13.71 69.27 16.14 68.46Q18.56 67.66 21.09 67.66L21.09 67.66Q28.76 67.66 32.55 72.72L32.55 72.72Q37.13 76.94 37.34 84.32L37.34 84.32Q37.13 91.28 33.05 96.41L33.05 96.41Q28.34 102.74 18.91
    102.74L18.91 102.74Q12.45 102.11 8.09 98.80L8.09 98.80Q3.59 94.80 3.02 88.33L3.02 88.33Z"/>`,
    "6":`<path d="M35.86 62.88L29.53 63.37Q28.69 59.64 27.14 58.02L27.14 58.02Q24.54 55.35 20.81 55.35L20.81 55.35Q17.79 55.35 15.47 56.48L15.47 56.48Q12.45 59.22 10.83 63.30L10.83 63.30Q10.20 65.41 9.49 68.43L9.49 68.43Q9 71.80 9 75.25L9 75.25Q11.32 71.73 14.59 70.08Q17.86 68.43 21.52 69.20L21.52 69.20Q27.77 68.43 32.24 73.11Q36.70 77.78 36.70 85.16L36.70 85.16Q36.70 89.95 34.63 94.13Q32.55 98.31 28.93 100.53Q25.31 102.74 20.60 102.74L20.60 102.74Q13.71 102.74 7.73 97.89L7.73 97.89Q2.74 91.28 2.74 77.71L2.74 77.71Q2.74 62.73 8.23 55.98L8.23 55.98Q13.01 50.01 21.16 50.08L21.16 50.08Q27.28 50.08 31.15 52.54L31.15 52.54Q35.02 56.90 35.86 62.88L35.86 62.88ZM10.97 85.23L9.98 85.16Q9.98 88.33 10.97 91.42L10.97 91.42Q12.73 94.09 15.26 96.03Q17.79 97.96 20.53 97.54L20.53 97.54Q24.40 97.54 27.32 94.30Q30.23 91.07 30.23 85.52L30.23 85.52Q30.23 80.24 27.70 77.08L27.70 77.08Q24.54 73.98 20.25 73.63L20.25 73.63Q16.03 73.98 12.94 77.08L12.94 77.08Q9.98 80.10 10.97 85.23L10.97 85.23Z"/>`,
    "7":`<path d="M3.38 57.04L3.38 58.16L4.29 50.92L36.77 49.94L36.77 55.91Q34.24 58.52 31.85 61.96L31.85 61.96Q28.41 65.48 27 69.84L27 69.84Q24.12 73.63 22.71 79.12L22.71 79.12Q20.88 83.05 19.55 87.20L19.55 87.20Q17.79 94.80 17.16 101.83L17.16 101.83L10.62 101.83Q10.69 99.37 11.25 95.15L11.25 95.15Q11.95 91.49 13.01 87.13L13.01 87.13Q15.26 78.48 20.11 70.26L20.11 70.26Q21.23 65.34 24.19 62.10L24.19 62.10Q26.30 59.78 28.69 57.04L28.69 57.04L3.38 57.04Z"/>`,
    "8":`<path d="M12.73 73.91L12.73 73.91Q4.99 71.03 4.99 63.37L4.99 63.37Q4.99 57.60 9 53.84Q13.01 50.08 20.11 50.08L20.11 50.08Q26.58 50.08 31.15 54.02L31.15 54.02Q34.80 57.46 35.09 63.51L35.09 63.51Q34.80 71.52 27.14 73.42L27.14 73.42Q31.92 74.76 34.73 78.91L34.73 78.91Q36.84 82.35 36.84 87.06L36.84 87.06Q36.84 93.81 32.98 98.24L32.98 98.24Q27.49 102.74 19.62 102.74L19.62 102.74Q12.23 102.25 7.59 98.24L7.59 98.24Q2.95 93.95 2.95 86.92L2.95 86.92Q2.18 81.93 5.48 78.48L5.48 78.48Q8.02 75.11 12.73 73.91ZM11.46 62.95L11.46 63.16Q11.46 66.95 13.99 69.13L13.99 69.13Q16.17 71.45 19.97 71.45L19.97 71.45Q23.41 71.45 26.37 69.13L26.37 69.13Q28.27 66.95 28.27 63.54Q28.27 60.13 24.82 57.74L24.82 57.74Q23.48 54.37 19.90 55.35L19.90 55.35Q16.10 55.35 13.78 57.64Q11.46 59.92 11.46 62.95L11.46 62.95ZM9.42 86.92L9.42 86.92Q9.42 89.73 10.65 92.23Q11.88 94.73 14.55 96.13L14.55 96.13Q17.02 97.54 19.97 97.54L19.97 97.54Q22.22 97.54 24.08 96.77Q25.95 95.99 27.42 94.59L27.42 94.59Q30.38 91.77 30.38 87.17Q30.38 82.56 27.35 79.61Q24.33 76.66 19.79 76.66Q15.26 76.66 12.94 79.61L12.94 79.61Q9.42 82.49 9.42 86.92Z"/>`,
    "9":`<path d="M4.71 89.88L9.98 89.38Q10.83 93.74 12.94 95.64L12.94 95.64Q15.12 96.84 18.56 97.54L18.56 97.54Q21.38 97.54 23.70 96.20L23.70 96.20Q25.88 94.87 27.28 92.62L27.28 92.62Q29.67 90.37 29.67 86.22L29.67 86.22Q30.09 84.74 30.34 82.77Q30.59 80.80 30.59 78.27L30.59 78.27Q30.59 78.70 30.80 78.34L30.80 78.34Q30.59 77.99 30.52 77.57L30.52 77.57Q28.76 80.95 25.31 82.49L25.31 82.49Q22.15 84.32 18.21 84.32L18.21 84.32Q11.81 84.81 7.38 79.75L7.38 79.75Q3.02 75.11 3.30 67.52L3.30 67.52Q3.09 59.64 7.59 54.44L7.59 54.44Q12.16 51.13 19.20 50.08L19.20 50.08Q24.12 50.08 28.34 53.24L28.34 53.24Q32.55 55.49 34.73 61.26L34.73 61.26Q36.84 65.69 36.84 74.97L36.84 74.97Q36.84 84.95 34.73
    90.79L34.73 90.79Q33.47 96.55 28.34 99.65L28.34 99.65Q24.12 102.74 18.42 102.74L18.42 102.74Q12.30 102.74 8.58 99.37L8.58 99.37Q4.71 96.84 4.71 89.88L4.71 89.88ZM29.88 67.23L29.88 67.23Q29.88 61.75 26.93 58.55Q23.98 55.35 19.97 55.35L19.97 55.35Q15.68 55.35 12.59 58.94L12.59 58.94Q9.49 62.10 9.49 67.73L9.49 67.73Q9.49 72.79 12.45 75.74L12.45 75.74Q15.47 78.84 19.83 78.06L19.83 78.06Q24.19 78.84 27.04 75.67Q29.88 72.51 29.88 67.23Z"/>`,
}



async function parseNum(str){
    return new Promise(function(resolve,reject){
        opentype.load("a.woff", function(err, font) {
            if (err) {
                reject('Font could not be loaded: ' + err)
            } else {
                //console.log(str)
                var path = font.getPath(str,0,100,72);
                //console.log(path.toSVG())
                let a = path.toSVG();
                //console.log(a)
                let max = 0;
                let key = 0;
                let arr = []
                for(let i=0;i<10;i++){
                    let temp = similar(a,svgPaths[i])
                    if(max<temp){
                        max = temp;
                        key = i;
                    }
                    arr.push({temp,i})
                }
                //console.log(arr)
                resolve({key,max})
                //console.log(key)
                //console.log(similar(a,b))
                //console.log(path)
                
            }
        });

    })


    
    //similar(a,b)
}
module.exports = parseNum;
